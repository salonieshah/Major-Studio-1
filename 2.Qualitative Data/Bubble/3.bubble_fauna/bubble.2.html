<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
		<title>D3: A simple packed Bubble Chart</title>
		<script type="text/javascript" src="https://d3js.org/d3.v4.min.js"></script>

		<style type="text/css">
			/* No style rules here yet */		
		</style>
</head>
<body>
	<script type="text/javascript">
// 	d3.json("all_tag.json", function(data) {
//     console.log(data);
// });

        dataset = {
            "children": [
  {
    "Tag": "Lions",
    "Count": 2002
  },
  {
    "Tag": "Birds",
    "Count": 8442
  },
  {
    "Tag": "Horses",
    "Count": 3168
  },
  {
    "Tag": "Animals",
    "Count": 4882
  },
  {
    "Tag": "Dogs",
    "Count": 3148
  },
  {
    "Tag": "Fish",
    "Count": 1442
  },
  {
    "Tag": "Deer",
    "Count": 1013
  },
  {
    "Tag": "Butterflies",
    "Count": 857
  },
  {
    "Tag": "Eagles",
    "Count": 818
  },
  {
    "Tag": "Insects",
    "Count": 639
  },
  {
    "Tag": "Bulls",
    "Count": 624
  },
  {
    "Tag": "Snakes",
    "Count": 519
  },
  {
    "Tag": "Elephants",
    "Count": 504
  },
  {
    "Tag": "Bears",
    "Count": 210
  },
  {
    "Tag": "Turtles",
    "Count": 186
  },
  {
    "Tag": "Bats",
    "Count": 179
  },
  {
    "Tag": "Dolphins",
    "Count": 173
  },
  {
    "Tag": "Foxes",
    "Count": 172
  },
  {
    "Tag": "Crocodiles",
    "Count": 134
  },
  {
    "Tag": "Leopards",
    "Count": 133
  },
  {
    "Tag": "Crabs",
    "Count": 105
  },
  {
    "Tag": "Dragonflies",
    "Count": 104
  },
  {
    "Tag": "Squirrels",
    "Count": 96
  },
  {
    "Tag": "Snails",
    "Count": 82
  },
  {
    "Tag": "Lizards",
    "Count": 64
  },
  {
    "Tag": "Scorpions",
    "Count": 57
  },
  {
    "Tag": "Bees",
    "Count": 56
  },
  {
    "Tag": "Hippos",
    "Count": 47
  },
  {
    "Tag": "Turkeys",
    "Count": 29
  },
  {
    "Tag": "Octopus",
    "Count": 28
  },
  {
    "Tag": "Giraffes",
    "Count": 25
  },
  {
    "Tag": "Whales",
    "Count": 24
  },
  {
    "Tag": "Seahorses",
    "Count": 23
  },
  {
    "Tag": "Spiders",
    "Count": 19
  },
  {
    "Tag": "Zebras",
    "Count": 18
  },
  {
    "Tag": "Cheetahs",
    "Count": 18
  },
  {
    "Tag": "Rats",
    "Count": 16
  },
  {
    "Tag": "Pelicans",
    "Count": 15
  },
  {
    "Tag": "Antelope",
    "Count": 13
  },
  {
    "Tag": "Crayfish",
    "Count": 13
  },
  {
    "Tag": "Squid",
    "Count": 1
  },
  {
    "Tag": "Cows",
    "Count": 668
  },
  {
    "Tag": "Cats",
    "Count": 603
  },
  {
    "Tag": "Monkeys",
    "Count": 473
  },
  {
    "Tag": "Peacocks",
    "Count": 438
  },
  {
    "Tag": "Sheep",
    "Count": 435
  },
  {
    "Tag": "Roosters",
    "Count": 408
  },
  {
    "Tag": "Goats",
    "Count": 395
  },
  {
    "Tag": "Rabbits",
    "Count": 364
  },
  {
    "Tag": "Ducks",
    "Count": 363
  },
  {
    "Tag": "Donkeys",
    "Count": 343
  },
  {
    "Tag": "Camels",
    "Count": 254
  },
  {
    "Tag": "Frogs",
    "Count": 234
  },
  {
    "Tag": "Chickens",
    "Count": 222
  },
  {
    "Tag": "Owls",
    "Count": 221
  },
  {
    "Tag": "Pigs",
    "Count": 172
  },
  {
    "Tag": "Parrots",
    "Count": 171
  },
  {
    "Tag": "Mice",
    "Count": 131
  },
  {
    "Tag": "Lambs",
    "Count": 98
  },
  {
    "Tag": "Buffalos",
    "Count": 83
  },
  {
    "Tag": "Ox",
    "Count": 51
  },
  {
    "Tag": "Pigeons",
    "Count": 46
  }
]
        };

        var diameter = 600;
        
        var color = d3.scaleOrdinal(d3.schemeCategory20);

        var bubble = d3.pack(dataset)
            .size([diameter, diameter])
            .padding(1.5);

        var svg = d3.select("body")
            .append("svg")
            .attr("width", diameter)
            .attr("height", diameter)
            .attr("class", "bubble");

        var nodes = d3.hierarchy(dataset)
            .sum(function(d) { return d.Count; });

        var node = svg.selectAll(".node")
            .data(bubble(nodes).descendants())
            .enter()
            .filter(function(d){
                return  !d.children
            })
            .append("g")
            .attr("class", "node")
            .attr("transform", function(d) {
                return "translate(" + d.x + "," + d.y + ")";
            });

        node.append("title")
            .text(function(d) {
                return d.Tag + ": " + d.Count;
            });

        node.append("circle")
            .attr("r", function(d) {
                return d.r;
            })
            .style("fill", function(d,i) {
                return color(i);
            });

        node.append("text")
            .attr("dy", ".2em")
            .style("text-anchor", "middle")
            .text(function(d) {
                return d.data.Tag.substring(0, d.r / 3);
            })
            .attr("font-family", "sans-serif")
            .attr("font-size", function(d){
                return d.r/5;
            })
            .attr("fill", "white");

        node.append("text")
            .attr("dy", "1.3em")
            .style("text-anchor", "middle")
            .text(function(d) {
                return d.data.Count;
            })
            .attr("font-family",  "Gill Sans", "Gill Sans MT")
            .attr("font-size", function(d){
                return d.r/5;
            })
            .attr("fill", "white");

        d3.select(self.frameElement)
            .style("height", diameter + "px");
            
             var color = d3.scaleOrdinal()
      .domain(["Butterflies", "Insects", "Dragonflies", "Snails", "Scorpions", "Bees", "Spiders"])
      .range([ "red", "red", "red", "red", "red", "red", "red" ]);
      
      d3.select("body").style("background-color", "#171717");



	</script>
</body>
</html>